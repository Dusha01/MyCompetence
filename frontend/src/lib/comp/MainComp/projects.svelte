<script lang="ts">
    import { fade, fly } from 'svelte/transition';
    import { flip } from 'svelte/animate';
    import { onMount } from 'svelte';
    
    let projects = [
      {
        id: 1,
        title: "01. Telegram Bot Notepad",
        description: "–£–º–Ω—ã–π –±–æ—Ç –¥–ª—è –∑–∞–º–µ—Ç–æ–∫ –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –∏ —Ç–µ–≥–∞–º–∏. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, –ø–æ–∏—Å–∫ –∏ –≥–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π.",
        icon: "üìù",
        tags: ["Python", "Aiogram", "MongoDB"],
        link: ""
      },
      {
        id: 2,
        title: "02. –ù–æ–≤–æ—Å—Ç–Ω–æ–π –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä",
        description: "–ö–æ–Ω—Å–æ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Å–±–æ—Ä–∞ –Ω–æ–≤–æ—Å—Ç–µ–π –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –∏ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º.",
        icon: "üì∞",
        tags: ["Python", "BeautifulSoup", "API"],
        link: "https://github.com/Dusha01/News-Aggregator"
      },
      {
        id: 3,
        title: "03. Server Metrics Telegram Bot",
        description: "–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫ —á–µ—Ä–µ–∑ Prometheus. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∞–ª–µ—Ä—Ç—ã –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –≤–∏–¥–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤ –ø—Ä—è–º–æ –≤ Telegram.",
        icon: "üìä",
        tags: ["Python", "Prometheus", "Grafana", "Telegram API"],
        link: "https://github.com/Dusha01/Alert_TG_BOT"
      },
      {
        id: 4,
        title: "04. AI Web Parser",
        description: "–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –ø–∞—Ä—Å–µ—Ä –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º AI –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –≤—ã–≤–æ–¥–∞.",
        icon: "ü§ñ",
        tags: ["Python", "LLM", "BeautifulSoup", "NLP"],
        link: "https://github.com/Dusha01/ai_pars_sites"
      }
    ];
  
    let hoveredProject = null;
    let isVisible = false;
    let sectionRef: HTMLElement;
  
    onMount(() => {
      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            isVisible = entry.isIntersecting;
          });
        },
        { threshold: 0.3 }
      );
  
      if (sectionRef) {
        observer.observe(sectionRef);
      }
      
      return () => {
        if (sectionRef) {
          observer.unobserve(sectionRef);
        }
      };
    });
  </script>
  
  <section 
    id="projects" 
    class="py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-gray-900 to-gray-800 text-white"
    bind:this={sectionRef}
    in:fade={{ duration: 300 }}
    out:fade
  >
    <div class="max-w-7xl mx-auto">
      <div class="text-center mb-16" 
        in:fly={{ y: 50, duration: 500 }}
        out:fly={{ y: 50, duration: 300 }}
        class:opacity-0={!isVisible}
        class:translate-y-[-20px]={!isVisible}
        class:opacity-100={isVisible}
        class:translate-y-0={isVisible}>
        <h2 class="text-4xl md:text-5xl font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-500">
          –ú–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã
        </h2>
        <p class="text-xl text-gray-300 max-w-3xl mx-auto">
          –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–∏–µ –º–æ–π –ø–æ–¥—Ö–æ–¥ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏ –Ω–∞–≤—ã–∫–∏ —Ä–∞–±–æ—Ç—ã —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º–∏
        </p>
      </div>
  
      <!-- –°–µ—Ç–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å –ø–æ—ç—Ç–∞–ø–Ω–æ–π –∞–Ω–∏–º–∞—Ü–∏–µ–π -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-8">
        {#each projects as project (project.id)}
          <article
            role="article"
            class="relative group overflow-hidden rounded-xl bg-gray-800 border border-gray-700 hover:border-blue-400 transition-all duration-300 hover:shadow-lg hover:shadow-blue-500/20"
            on:mouseenter={() => hoveredProject = project.id}
            on:mouseleave={() => hoveredProject = null}
            animate:flip={{ duration: 500 }}
            in:fade={{ delay: 100 * project.id }}
            out:fade
            class:opacity-0={!isVisible}
            class:translate-y-6={!isVisible}
            class:opacity-100={isVisible}
            class:translate-y-0={isVisible}
            style={`transition-delay: ${project.id * 100}ms`}>
            
            <div class="absolute inset-0 bg-gradient-to-br from-blue-900/20 to-purple-900/20 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
    
            <div class="relative z-10 p-8 h-full flex flex-col">
              <div class="flex items-start mb-6">
                <div class="text-4xl mr-4 text-blue-400">{project.icon}</div>
                <h3 class="text-2xl font-bold text-white mt-1">{project.title}</h3>
              </div>
    
              <p class="text-gray-300 mb-6 flex-grow">{project.description}</p>
    
              <div class="flex flex-wrap gap-2 mt-auto">
                {#each project.tags as tag}
                  <span class="px-3 py-1 rounded-full text-sm bg-gray-700 text-blue-300 group-hover:bg-blue-900/30 group-hover:text-blue-200 transition-colors">
                    {tag}
                  </span>
                {/each}
              </div>
    
              {#if project.link}
                <div class="mt-6 transform translate-y-2 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-300">
                  <a 
                    href={project.link} 
                    target="_blank" 
                    rel="noopener noreferrer"
                    class="inline-flex items-center text-blue-400 hover:text-blue-300 font-medium">
                    –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" viewBox="0 0 20 20" fill="currentColor">
                      <path fill-rule="evenodd" d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />
                    </svg>
                  </a>
                </div>
              {/if}
            </div>
          </article>
        {/each}
      </div>
  
      <div class="text-center mt-16" 
        in:fly={{ y: 50, duration: 500, delay: 300 }}
        out:fly={{ y: 50, duration: 300 }}
        class:opacity-0={!isVisible}
        class:translate-y-[-20px]={!isVisible}
        class:opacity-100={isVisible}
        class:translate-y-0={isVisible}>
        <a 
          href="https://github.com/Dusha01" 
          target="_blank"
          rel="noopener noreferrer"
          class="inline-block px-8 py-3 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 text-white font-medium hover:shadow-lg hover:shadow-blue-500/30 transition-all transform hover:-translate-y-1">
          –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –ø—Ä–æ–µ–∫—Ç—ã
        </a>
      </div>
    </div>
  </section>
  
  <style>
    [class*="transition-all"] {
      transition-property: all;
      will-change: transform, opacity;
    }
  
    section > div > * {
      transition: opacity 0.9s cubic-bezier(0.16, 1, 0.3, 1), 
                  transform 0.9s cubic-bezier(0.16, 1, 0.3, 1);
    }
  
    article {
      transition: transform 0.5s ease, box-shadow 0.5s ease, border-color 0.5s ease;
    }
  
    article:hover {
      transform: translateY(-5px);
    }
  </style>