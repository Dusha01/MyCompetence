<script lang="ts">
    import { fade, fly } from 'svelte/transition';
    import { flip } from 'svelte/animate';
    import { onMount } from 'svelte';
    
    interface ExperienceItem {
      id: number;
      title: string;
      description: string;
      date?: string;
      icon: string;
      tags: string[];
    }
  
    const experience: ExperienceItem[] = [
      {
        id: 1,
        title: "–§–æ—Ä–∫ –ø—Ä–æ–µ–∫—Ç–∞ Node-RED",
        description: "–ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ —É–ª—É—á—à–µ–Ω–∏–µ open-source –ø—Ä–æ–µ–∫—Ç–∞ Node-RED –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —É–∑–ª–æ–≤ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.",
        date: "–ú–∞–π 2025",
        icon: "‚öôÔ∏è",
        tags: ["Node.js", "JavaScript", "Flow-based programming"],
      },
      {
        id: 2,
        title: "–§—Ä–∏–ª–∞–Ω—Å: —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ Telegram-–±–æ—Ç–æ–≤",
        description: "–°–æ–∑–¥–∞–Ω–∏–µ –º–Ω–æ–≥–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö Telegram-–±–æ—Ç–æ–≤ –¥–ª—è –º–∞–ª–æ–≥–æ –±–∏–∑–Ω–µ—Å–∞ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º, CRM –∏ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞ —á–µ—Ä–µ–∑ OpenAI API.",
        date: "–ò—é–Ω—å - –ò—é–ª—å 2025",
        icon: "ü§ñ",
        tags: ["Python", "MongoDB", "REST API", "OpenAI", "Telegram API"],
      },
      {
        id: 3,
        title: "–í–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞",
        description: "–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π: –æ—Ç –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ UI/UX –¥–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ backend –∏ –¥–µ–ø–ª–æ—è. –û—Å–æ–±—ã–π –∞–∫—Ü–µ–Ω—Ç –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ UX.",
        date: "2025 - –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è",
        icon: "üåê",
        tags: ["Svelte", "HTML5", "CSS3", "Tailwind CSS", "Node.js", "MongoDB", "PostgreSQL"],
      },
    ];
  
    let isVisible = false;
    let sectionRef: HTMLElement;
  
    onMount(() => {
      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            isVisible = entry.isIntersecting;
          });
        },
        { threshold: 0.2 }
      );
  
      if (sectionRef) {
        observer.observe(sectionRef);
      }
      
      return () => {
        if (sectionRef) {
          observer.unobserve(sectionRef);
        }
      };
    });
  </script>
  
  <section
    id="experience"
    class="py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-gray-900 to-gray-800 text-white"
    bind:this={sectionRef}>
    
    <div class="max-w-7xl mx-auto">
      <div class="text-left mb-16" 
        in:fly={{ y: 50, duration: 500, delay: 0 }}
        out:fly={{ y: 50, duration: 300 }}
        class:opacity-0={!isVisible}
        class:translate-y-[-20px]={!isVisible}
        class:opacity-100={isVisible}
        class:translate-y-0={isVisible}>
        <h2 class="text-4xl md:text-5xl font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-500">
          –ù–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–π –æ–ø—ã—Ç
        </h2>
        <p class="text-xl text-gray-300 max-w-3xl">
          –ó–∞ –≥–æ–¥ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–∏ –æ—Å–≤–æ–∏–ª –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ ‚Äî –æ—Ç –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –¥–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≥–æ—Ç–æ–≤—ã—Ö —Ä–µ—à–µ–Ω–∏–π.
        </p>
      </div>
  
      <div class="grid grid-cols-1 gap-8">
        {#each experience as item (item.id)}
          <article
            role="article"
            class="relative group overflow-hidden rounded-xl bg-gray-800 border border-gray-700 hover:border-blue-400 transition-all duration-300 hover:shadow-lg hover:shadow-blue-500/20"
            animate:flip={{ duration: 500 }}
            in:fade={{ delay: 100 * item.id }}
            out:fade
            class:opacity-0={!isVisible}
            class:translate-y-4={!isVisible}
            class:opacity-100={isVisible}
            class:translate-y-0={isVisible}
            style={`transition-delay: ${item.id * 150}ms`}>
            
            <div class="absolute inset-0 bg-gradient-to-br from-blue-900/20 to-purple-900/20 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
    
            <div class="relative z-10 p-8 h-full flex flex-col">
              <div class="flex items-start mb-6">
                <div class="text-4xl mr-4 text-blue-400">{item.icon}</div>
                <div>
                  <h3 class="text-2xl font-bold text-white">{item.title}</h3>
                  {#if item.date}
                    <p class="text-gray-400 mt-1">{item.date}</p>
                  {/if}
                </div>
              </div>
    
              <p class="text-gray-300 mb-6 flex-grow">{item.description}</p>
    
              <div class="flex flex-wrap gap-2 mt-auto">
                {#each item.tags as tag}
                  <span class="px-3 py-1 rounded-full text-sm bg-gray-700 text-blue-300 group-hover:bg-blue-900/30 group-hover:text-blue-200 transition-colors">
                    {tag}
                  </span>
                {/each}
              </div>
            </div>
          </article>
        {/each}
      </div>
  
      <div class="text-center mt-16" 
        in:fly={{ y: 50, duration: 500, delay: 300 }}
        out:fly={{ y: 50, duration: 300 }}
        class:opacity-0={!isVisible}
        class:translate-y-[-20px]={!isVisible}
        class:opacity-100={isVisible}
        class:translate-y-0={isVisible}>
        <p class="text-gray-400 max-w-3xl mx-auto">
          –ö–∞–∂–¥—ã–π –ø—Ä–æ–µ–∫—Ç ‚Äî —ç—Ç–æ –Ω–æ–≤—ã–π –≤—ã–∑–æ–≤ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–ª—É—á—à–∏—Ç—å —Å–≤–æ–∏ –Ω–∞–≤—ã–∫–∏. 
          –°—Ç—Ä–µ–º–ª—é—Å—å —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ä–∞–±–æ—Ç–∞—é—â–∏–π –∫–æ–¥, –∞ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–µ —Ä–µ—à–µ–Ω–∏—è.
        </p>
      </div>
    </div>
  </section>
  
  <style>
    [class*="transition-all"] {
      transition-property: all;
      will-change: transform, opacity;
    }
  
    section > div > * {
      transition: opacity 0.9s ease-out, transform 0.9s ease-out;
    }
  </style>